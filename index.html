<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>title</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
    span.s2 {font: 12.0px 'Songti SC'; font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="utf-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;love++&lt;/title&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>html,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 500px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 300px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 50px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 30px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 100px 289px;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: #f6d8e2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>pp1 {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>canvas {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 1000px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 500px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 135px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 50px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link href="css/default.css" type="text/css" rel="stylesheet"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script type="text/javascript" src="d.js"&gt;&lt;/script&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script language="javascript" type="text/javascript"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// 18</span><span class="s2">秒以后再跳转</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>setTimeout("javascript:location.href='./index.html'", 35000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;div id="myContent"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;div id="contentToWrite" class="comments"<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>style="margin-left: 39px;color: red;"&gt;</span><span class="s2">今天很美</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;div id="contentToWrite" class="comments"<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>style="margin-left: 39px;color:#f6d8e2;"&gt;00&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;div id="contentToWrite" class="comments"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>style="margin-left: 30px;color: red;"&gt;</span><span class="s2">你也是</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;script type="text/javascript"&gt; writeContent(true); &lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;canvas id="pinkboard"&gt;&lt;/canvas&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Settings</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var settings = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>particles: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>length: 500, // maximum amount of particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>duration: 2, // particle duration in sec</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>velocity: 100, // particle velocity in pixels/sec</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>effect: -0.75, // play with this for a nice effect</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>size: 30, // particle size in pixels</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* RequestAnimationFrame polyfill by Erik M?ller</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>(function () { var b = 0; var c = ["ms", "moz", "webkit", "o"]; for (var a = 0; a &lt; c.length &amp;&amp; !window.requestAnimationFrame; ++a) { window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"]; window.cancelAnimationFrame = window[c[a] + "CancelAnimationFrame"] || window[c[a] + "CancelRequestAnimationFrame"] } if (!window.requestAnimationFrame) { window.requestAnimationFrame = function (h, e) { var d = new Date().getTime(); var f = Math.max(0, 16 - (d - b)); var g = window.setTimeout(function () { h(d + f) }, f); b = d + f; return g } } if (!window.cancelAnimationFrame) { window.cancelAnimationFrame = function (d) { clearTimeout(d) } } }());</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Point class</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var Point = (function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function Point(x, y) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.x = (typeof x !== 'undefined') ? x : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.y = (typeof y !== 'undefined') ? y : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Point.prototype.clone = function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return new Point(this.x, this.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Point.prototype.length = function (length) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (typeof length == 'undefined')</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return Math.sqrt(this.x * this.x + this.y * this.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.normalize();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.x *= length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.y *= length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return this;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Point.prototype.normalize = function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var length = this.length();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.x /= length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.y /= length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return this;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return Point;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>})();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Particle class</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var Particle = (function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function Particle() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.position = new Point();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.velocity = new Point();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.acceleration = new Point();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.age = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Particle.prototype.initialize = function (x, y, dx, dy) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.position.x = x;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.position.y = y;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.velocity.x = dx;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.velocity.y = dy;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.acceleration.x = dx * settings.particles.effect;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.acceleration.y = dy * settings.particles.effect;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.age = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Particle.prototype.update = function (deltaTime) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.position.x += this.velocity.x * deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.position.y += this.velocity.y * deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.velocity.x += this.acceleration.x * deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.velocity.y += this.acceleration.y * deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>this.age += deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>Particle.prototype.draw = function (context, image) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>function ease(t) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return (--t) * t * t + 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var size = image.width * ease(this.age / settings.particles.duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.globalAlpha = 1 - this.age / settings.particles.duration;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return Particle;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>})();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* ParticlePool class</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var ParticlePool = (function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var particles,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>firstActive = 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>firstFree = 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>duration = settings.particles.duration;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function ParticlePool(length) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// create and populate particle pool</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particles = new Array(length);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; particles.length; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>particles[i] = new Particle();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ParticlePool.prototype.add = function (x, y, dx, dy) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particles[firstFree].initialize(x, y, dx, dy);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// handle circular queue</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>firstFree++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstFree == particles.length) firstFree = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstActive == firstFree) firstActive++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstActive == particles.length) firstActive = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ParticlePool.prototype.update = function (deltaTime) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var i;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// update active particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstActive &lt; firstFree) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = firstActive; i &lt; firstFree; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].update(deltaTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstFree &lt; firstActive) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = firstActive; i &lt; particles.length; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].update(deltaTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = 0; i &lt; firstFree; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].update(deltaTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// remove inactive particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>while (particles[firstActive].age &gt;= duration &amp;&amp; firstActive != firstFree) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>firstActive++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (firstActive == particles.length) firstActive = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ParticlePool.prototype.draw = function (context, image) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// draw active particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstActive &lt; firstFree) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = firstActive; i &lt; firstFree; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].draw(context, image);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (firstFree &lt; firstActive) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = firstActive; i &lt; particles.length; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].draw(context, image);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>for (i = 0; i &lt; firstFree; i++)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>particles[i].draw(context, image);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return ParticlePool;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>})();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/*</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Putting it all together</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>(function (canvas) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var context = canvas.getContext('2d'),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particles = new ParticlePool(settings.particles.length),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particleRate = settings.particles.length / settings.particles.duration, // particles/sec</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>time;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// get point on heart with -PI &lt;= t &lt;= PI</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function pointOnHeart(t) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return new Point(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>180 * Math.pow(Math.sin(t), 3),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>160 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// creating the particle image using a dummy canvas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var image = (function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var canvas = document.createElement('canvas'),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>context = canvas.getContext('2d');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.width = settings.particles.size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.height = settings.particles.size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// helper function to create the path</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>function to(t) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var point = pointOnHeart(t);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return point;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// create the path</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var t = -Math.PI;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var point = to(t);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.moveTo(point.x, point.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>while (t &lt; Math.PI) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>t += 0.01; // baby steps!</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>point = to(t);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>context.lineTo(point.x, point.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.closePath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// create the fill</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.fillStyle = '#fa759f';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// create the image</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var image = new Image();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>image.src = canvas.toDataURL();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return image;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>})();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// render that thing!</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function render() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// next animation frame</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>requestAnimationFrame(render);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// update time</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var newTime = new Date().getTime() / 1000,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>deltaTime = newTime - (time || newTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>time = newTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// clear canvas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>context.clearRect(0, 0, canvas.width, canvas.height);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// create new particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var amount = particleRate * deltaTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; amount; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var dir = pos.clone().length(settings.particles.velocity);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// update and draw particles</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particles.update(deltaTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>particles.draw(context, image);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// handle (re-)sizing of the canvas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function onResize() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.width = canvas.clientWidth;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.height = canvas.clientHeight;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>window.onresize = onResize;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// delay rendering bootstrap</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(function () {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>onResize();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>render();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}, 50);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>})(document.getElementById('pinkboard'));&lt;/script&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>var charIndex = -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>var stringLength = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>var inputText;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>function writeContent(init) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (init) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>inputText = document.getElementById('contentToWrite').innerHTML;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (charIndex == -1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>charIndex = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>stringLength = inputText.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var initString = document.getElementById('myContent').innerHTML;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>initString = initString.replace(/&lt;SPAN.*$/gi, "");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var theChar = inputText.charAt(charIndex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>var nextFourChars = inputText.substr(charIndex, 4);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (nextFourChars == '&lt;BR&gt;' || nextFourChars == '&lt;br&gt;') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>theChar = '&lt;BR&gt;';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>charIndex += 3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>initString = initString + theChar + "&lt;SPAN id='blink'&gt;_&lt;/SPAN&gt;";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('myContent').innerHTML = initString;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>charIndex = charIndex / 1 + 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (charIndex % 2 == 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('blink').style.display = 'none';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('blink').style.display = 'inline';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (charIndex &lt;= stringLength) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout('writeContent(false)', 300);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>blinkSpan();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>var currentStyle = 'inline';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>function blinkSpan() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (currentStyle == 'inline') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>currentStyle = 'none';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>currentStyle = 'inline';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('blink').style.display = currentStyle;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>setTimeout('blinkSpan()', 300);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
